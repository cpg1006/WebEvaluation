<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="ISO-8859-1">

<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>

<title th:text="'Group '+${group.number}"></title>

<style>
body {
	padding-top: 20px;
}

.status-item {
	display: flex;
	align-items: center;
	gap: 4px;s
}
</style>
<body>
	<nav class="navbar fixed-top navbar-expand-xl navbar-dark bg-secondary">

		<div class="container">	
			<button
				   class="navbar-toggler"
				   type="button"
				   data-bs-toggle="collapse"
				   data-bs-target="#navbarNav"
				   aria-controls="navbarNav"
				   aria-expanded="false"
				   aria-label="Toggle navigation">
				   <span class="navbar-toggler-icon"></span>

			</button>
			<div class="collapse navbar-collapse" id="navbarNav">
				<ul class="navbar-nav">
					<li class="nav-item active"><a type="button"
						class="btn btn-outline-light btn-sm"
						style="margin-top: 3px; margin-right: 10px; white-space: nowrap;"
						th:href="@{/adminGroups}"> Back </a></li>
					<li th:if="${group.archived == false}"><a type="button"
						class="btn btn-outline-light btn-sm"
						style="margin-top: 3px; margin-right: 10px; white-space: nowrap;"
						th:href="@{/download_eval_group_results/{groupId}(groupId = ${group.Id})}">
							Download Analysis </a></li>
					<li th:if="${group.archived == false}"><a type="button"
						class="btn btn-outline-light btn-sm"
						style="margin-top: 3px; margin-right: 10px; white-space: nowrap;"
						th:href="@{/charts/{id}(id=${group.id})}"> Generate Charts </a></li>
					<li th:if="${group.archived == false}"><a type="button"
						class="btn btn-outline-light btn-sm"
						style="margin-top: 3px; margin-right: 10px; white-space: nowrap;"
						th:onclick="|window.location.href='@{/editgroup/{id}(id=${group.id})}'|">
							Edit </a></li>
					<li th:if="${group.archived == false}"><a type="button"
						class="btn btn-danger btn-sm"
						style="margin-top: 3px; margin-right: 10px; white-space: nowrap;"
						th:onclick="|window.location.href='@{/archivegroup/{id}(id=${group.id})}'|">
							Archive </a></li>
				</ul>
			<!--<button type="button" class="btn btn-danger btn-sm"
					data-toggle="modal" data-target="#deleteModal"
					style="margin-top: 3px; margin-right: 10px; white-space: nowrap;">
					Delete</button>

				<div class="modal fade" id="deleteModal" data-backdrop="static"
					data-keyboard="false" tabindex="-1"
					th:aria-labelledby="'homeModalLabel' + ${group.id}"
					aria-hidden="true">
					<div class="modal-dialog">
						<div class="modal-content">
							<div class="modal-header">
								<h5 class="modal-title" th:id="'homeModalLabel' + ${group.id}">Warning</h5>
								<button type="button" class="btn-close" data-bs-dismiss="modal"
									aria-label="Close"></button>
							</div>
							<div class="modal-body">Are you sure you want to delete
								this group</div>
							<div class="modal-footer">
								<button id="deleteButton" type="button"
									class="btn btn-secondary" data-bs-dismiss="modal">
									<!--th:onclick="|window.location.href='@{/delete/{id}(id=${group.id})}'|">
									Yes
								</button>
								<a th:href="@{/home}" type="button" class="btn btn-primary">No
								</a>
							</div>
						</div>
					</div>
				</div>-->
			</div>

		</div>
	</nav>
	<!--
		<div class="btn-group ">
			<span style= "padding-right:5px">
				<a th:href="@{/adminGroups}">	
					<button class="btn btn-outline-success " type="button">Back</button>
				</a>
			</span>
			<span th:if="${group.archived == false}" style="padding-right:5px">
				<a th:href="@{/download_eval_group_results/{groupId}(groupId = ${group.Id})}">
					<button class="btn btn-outline-success" type="button">Download Analysis</button>
				</a>	
			</span>
			<span th:if="${group.archived == false} and ${user != null}" style="padding-right:5px">
				<a th:href="@{/charts/{id}(id=${group.id})}">
					<button class="btn btn-outline-success" type="button">Generate Charts</button>
				</a>	
			</span>
			<span style= "padding-right:5px">	
				<a>	
					<button th:if="${group.archived == false} and ${user != null}" class="btn btn-outline-success " type="button" th:onclick="|window.location.href='@{/editgroup/{id}(id=${group.id})}'|">Edit</button>
				</a>
			</span>
			<span style= "padding-right:5px">	
				<a>	
					<button class="btn btn-outline-success " type="button" th:onclick="|window.location.href='@{/archivegroup/{id}(id=${group.id})}'|">Archive</button>
				</a>
			</span>	
			<a>	
				<button type="button" class="btn btn-outline-danger" data-bs-toggle="modal" th:data-bs-target="'#homeModal'+ ${group.id}">Delete</button>
			</a>
			<div class="modal fade" th:id="'homeModal' + ${group.id}"
													data-bs-backdrop="static" data-bs-keyboard="false"
													tabindex="-1"
													th:aria-labelledby="'homeModalLabel' + ${group.id}"
													aria-hidden="true">
				<div class="modal-dialog">
					<div class="modal-content">
						<div class="modal-header">
							<h5 class="modal-title"
								th:id="'homeModalLabel' + ${group.id}">Warning</h5>
							<button type="button" class="btn-close"
								data-bs-dismiss="modal" aria-label="Close"></button>
						</div>
						<div class="modal-body">Are you sure you want to delete this group</div>
						<div class="modal-footer">
							<button id="deleteButton" type="button"
								class="btn btn-secondary" data-bs-dismiss="modal"
								th:onclick="|window.location.href='@{/delete/{id}(id=${group.id})}'|">
								Yes</button>
							<a th:href="@{/home}" type="button"
								class="btn btn-primary">No </a>
						</div>
					</div>
				</div>
			</div>
		</div>
-->

  		<button class="btn btn-sm btn-primary" style="margin-top: 50px; margin-left: 120px;" type="button" data-bs-toggle="collapse" data-bs-target="#collapseExample" aria-expanded="false" aria-controls="collapseExample">
    		Legend
  		</button>
  		
		<div class="collapse" id="collapseExample">
  			<div class="card card-body" style="margin-left: 120px;">
    			<div class="status-item">
    				<svg xmlns="http://www.w3.org/2000/svg" width="16"
						 height="16" fill="currentColor" class="bi bi-x-circle-fill"
					 	viewBox="0 0 16 16" style="color: red;">
  					 	<path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0M5.354 4.646a.5.5 0 1 0-.708.708L7.293 8l-2.647 2.646a.5.5 0 0 0 .708.708L8 8.707l2.646 2.647a.5.5 0 0 0 .708-.708L8.707 8l2.647-2.646a.5.5 0 0 0-.708-.708L8 7.293z" />
					</svg> : <i><b>(Status)</b> Not Completed, <b>(Preview)</b> Not Available, <b>(Sync Status)</b> Async</i>
    			</div>
    			<div class="status-item">
    				<svg xmlns="http://www.w3.org/2000/svg" width="16"
						 height="16" fill="currentColor" class="bi bi-dash-circle-fill"
						 viewBox="0 0 16 16" style="color: yellow;">
  					 	<path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0M4.5 7.5a.5.5 0 0 0 0 1h7a.5.5 0 0 0 0-1z" />
					</svg> : <i><b>(Status)</b> Progress</i>
    			</div>
				<div class="status-item">
					<svg xmlns="http://www.w3.org/2000/svg" width="16"
						 height="16" fill="currentColor" class="bi bi-check-circle-fill"
					 	viewBox="0 0 16 16" style="color: green">
  					 	<path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0m-3.97-3.03a.75.75 0 0 0-1.08.022L7.477 9.417 5.384 7.323a.75.75 0 0 0-1.06 1.06L6.97 11.03a.75.75 0 0 0 1.079-.02l3.992-4.99a.75.75 0 0 0-.01-1.05z" />
					</svg> : <i><b>(Status)</b> Completed, <b>(Preview)</b> Available, <b>(Sync Status)</b> Sync</i>
				</div>
				<div class="status-item">
										<p>
											<strong>Synchronous:</strong> Evaluation must be conducted
											concurrently with other evaluations.
										</p>
										<p>
											<strong>Asynchronous:</strong> Evaluation can be conducted
											independently of other evaluations.
										</p>
										<p>
											<strong>Preview:</strong> Users have the capability to
											preview the evaluation before completing it.
										</p>
									</div>
  			</div>
		</div>
		
	<!--<table class="table" align="center">
			<!--<thead>
				<tr>
					<th>Legend</th>
				</tr>
			</thead>
			<tbody>
				<tr>
					<td><svg xmlns="http://www.w3.org/2000/svg" width="16"
							height="16" fill="currentColor" class="bi bi-x-circle-fill"
							viewBox="0 0 16 16" style="color: red;">
  							<path
								d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0M5.354 4.646a.5.5 0 1 0-.708.708L7.293 8l-2.647 2.646a.5.5 0 0 0 .708.708L8 8.707l2.646 2.647a.5.5 0 0 0 .708-.708L8.707 8l2.647-2.646a.5.5 0 0 0-.708-.708L8 7.293z" />
						</svg> : <i>Not Completed</i></td>
				</tr>
				<tr>
					<td><svg xmlns="http://www.w3.org/2000/svg" width="16"
							height="16" fill="currentColor" class="bi bi-dash-circle-fill"
							viewBox="0 0 16 16" style="color: yellow;">
  							<path
								d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0M4.5 7.5a.5.5 0 0 0 0 1h7a.5.5 0 0 0 0-1z" />
						</svg> : <i>In Progress</i></td>
				</tr>
				<tr>
					<td><svg xmlns="http://www.w3.org/2000/svg" width="16"
							height="16" fill="currentColor" class="bi bi-check-circle-fill"
							viewBox="0 0 16 16" style="color: green">
  							<path
								d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0m-3.97-3.03a.75.75 0 0 0-1.08.022L7.477 9.417 5.384 7.323a.75.75 0 0 0-1.06 1.06L6.97 11.03a.75.75 0 0 0 1.079-.02l3.992-4.99a.75.75 0 0 0-.01-1.05z" />
						</svg> : <i>Completed</i></td>
				</tr>
			</tbody>
		</table>-->

	<div class="container  mt-3">
		<h3>Group Users</h3>
		<div style="overflow-x: auto;">
			<table class="table" align="center">
				<thead>
					<tr>
						<th>Name</th>
						<th>Last Name</th>
						<th>First Name</th>
						<th>Job Title</th>
						<th>Employee ID</th>
						<th>Review Stage</th>
						<th>Status</th>
						<th>Options</th>
					</tr>
				</thead>
				<tbody>
					<tr th:each="rev : ${group.reviewee}"
						style="vertical-align: baseline; height: 30px">
						<td th:text="${rev.user.name}"></td>
						<td th:text="${rev.user.lastName}"></td>
						<td th:text="${rev.user.firstName}"></td>
						<td th:text="${rev.user.jobTitle}"></td>
						<td th:text="${rev.user.id}"></td>
						<td>
							<p
								th:unless="${rev.selfEvaluation != null and rev.selfEvaluation.completed == true}">Self
								Evaluation</p>
							<div th:each="role : ${role}">
								<div th:each="logs : ${rev.evalutationLog}"
									th:if="${role ==  logs.Evaluator.level}">
									<p th:unless="${logs.completed}"
										th:text="${logs.Evaluator.level.Name}"></p>
								</div>
							</div>
						</td>
						<td
							th:unless="${rev.selfEvaluation != null and rev.selfEvaluation.completed == true}">
							<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16"
								fill="currentColor" class="bi bi-dash-circle-fill"
								viewBox="0 0 16 16" style="color: yellow; margin-left: 15px;">
  								<path
									d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0M4.5 7.5a.5.5 0 0 0 0 1h7a.5.5 0 0 0 0-1z" />
							</svg>
						</td>
						<td><a
							th:href="@{/admineval/{id}/{gid}(id = ${rev.id}, gid=${group.id})}">
								<button style="font-size: 15px" class="btn btn-outline-success">View</button>
						</a></td>
					</tr>
				</tbody>
			</table>
		</div>

		<div class="groupEvaluators">
			<h3>Evaluators</h3>
			<div style="overflow-x: auto;">
				<table class="table" align="center">
					<thead>
						<tr>
							<th>Name</th>
							<th>Level</th>
							<th>Preview</th>
							<th>Sync Status</th>
							<th>Deadline</th>
						</tr>
					</thead>
					<tbody>
						<div th:each="role : ${roles}">
							<tr th:each="evaluator : ${group.evaluator}"
								th:if="${role == evaluator.level}">
								<!-- <td th:if="${rowStat.index != 0}">
								<i th:if="${evaluator.sync} == false" class="bi bi-x-circle" style="color: red;"></i>
								<i th:if="${evaluator.sync} == true" class="bi bi-check-circle" style="color: green;"></i>
							</td> -->
								<td th:text="${evaluator.user.name}"></td>
								<td th:text="${role.name}"></td>
								<!--<td th:text="${evaluator.sync}"></td>-->
								<td th:if="${evaluator.preview == true}"><svg
										xmlns="http://www.w3.org/2000/svg" width="16" height="16"
										fill="currentColor" class="bi bi-check-circle-fill"
										viewBox="0 0 16 16" style="color: green; margin-left: 20px;">
  										<path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0m-3.97-3.03a.75.75 0 0 0-1.08.022L7.477 9.417 5.384 7.323a.75.75 0 0 0-1.06 1.06L6.97 11.03a.75.75 0 0 0 1.079-.02l3.992-4.99a.75.75 0 0 0-.01-1.05z" />
								</svg>
								</td>
								<td th:if="${evaluator.preview == false}"><svg
										xmlns="http://www.w3.org/2000/svg" width="16" height="16"
										fill="currentColor" class="bi bi-x-circle-fill"
										viewBox="0 0 16 16" style="color: red; margin-left: 20px;">
  										<path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0M5.354 4.646a.5.5 0 1 0-.708.708L7.293 8l-2.647 2.646a.5.5 0 0 0 .708.708L8 8.707l2.646 2.647a.5.5 0 0 0 .708-.708L8.707 8l2.647-2.646a.5.5 0 0 0-.708-.708L8 7.293z" />
								</svg>
								</td>
								<td th:if="${evaluator.sync == true}">
									<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16"
										 fill="currentColor" class="bi bi-check-circle-fill"
										 viewBox="0 0 16 16" style="color: green; margin-left: 30px;">
  										 <path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0m-3.97-3.03a.75.75 0 0 0-1.08.022L7.477 9.417 5.384 7.323a.75.75 0 0 0-1.06 1.06L6.97 11.03a.75.75 0 0 0 1.079-.02l3.992-4.99a.75.75 0 0 0-.01-1.05z" />
									</svg>
								</td>
								<td th:if="${evaluator.sync == false}">
									<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16"
										 fill="currentColor" class="bi bi-x-circle-fill"
										 viewBox="0 0 16 16" style="color: red; margin-left: 30px;">
  										 <path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0M5.354 4.646a.5.5 0 1 0-.708.708L7.293 8l-2.647 2.646a.5.5 0 0 0 .708.708L8 8.707l2.646 2.647a.5.5 0 0 0 .708-.708L8.707 8l2.647-2.646a.5.5 0 0 0-.708-.708L8 7.293z" />
									</svg>
								</td>
								<td th:text="${#dates.format(evaluator.deadline, 'yyyy-MM-dd')}">
								</td>

								<!--
							<td th:if="${evaluator.level.completed == true}">
								<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-x-circle-fill" viewBox="0 0 16 16" style="color: red; margin-left: 15px;">
  									<path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0M5.354 4.646a.5.5 0 1 0-.708.708L7.293 8l-2.647 2.646a.5.5 0 0 0 .708.708L8 8.707l2.646 2.647a.5.5 0 0 0 .708-.708L8.707 8l2.647-2.646a.5.5 0 0 0-.708-.708L8 7.293z"/>
								</svg>
							</td>
							<td th:if="${evaluator.level.completed == false}">
								<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-check-circle-fill" viewBox="0 0 16 16" style="color: green; margin-left: 15px;">
  									<path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0m-3.97-3.03a.75.75 0 0 0-1.08.022L7.477 9.417 5.384 7.323a.75.75 0 0 0-1.06 1.06L6.97 11.03a.75.75 0 0 0 1.079-.02l3.992-4.99a.75.75 0 0 0-.01-1.05z"/>
								</svg>
							</td>
						-->

							</tr>
						</div>
					</tbody>
				</table>
			</div>

		</div>
	</div>
</body>
</html>