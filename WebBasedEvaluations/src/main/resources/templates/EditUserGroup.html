<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<head>
	<meta charset="ISO-8859-1">
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"
		integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
	<title>Edit Groups</title>
	<style>
		#updateBtn {
			display: flex;
			justify-content: center;
		}
	</style>

	<script th:inline="javascript">


		function removeEdit() {
			let btn = document.getElementClassName("left");
		}
		function radioClicked(questID, option1, option2) {
			//alert("ID: " + questID + " OPTION: " + option);
			var insertDiv = document.getElementById(questID + option1 + option2);
			if (insertDiv.innerHTML.trim() == "") {
				insertDiv.innerHTML = "<input type=\"hidden\" name=\"role\" value=\"" + questID + "\">";

			} else {
				insertDiv.innerHTML = "";
			}

		}


		function radioClicked2(questID, option1) {
			//alert("ID: " + questID + " OPTION: " + option);
			var insertDiv = document.getElementById(questID + 'sync');

			insertDiv.innerHTML = "<input type=\"hidden\" name=\"issync\" value=\"" + option1 + "\">";


		}

		function radioClicked3(questID, option1) {
			//alert("ID: " + questID + " OPTION: " + option);
			var insertDiv = document.getElementById(questID + 'prev');

			insertDiv.innerHTML = "<input type=\"hidden\" name=\"isprev\" value=\"" + option1 + "\">";

		}


	</script>
	<script src="https://code.jquery.com/jquery-3.7.0.js"></script>
	
<style>
	body {
		padding-top: 20px;
	}
</style>
</head>

<body>
	<nav class="navbar navbar-light bg-light  justify-content-center ">
		<div class="btn-group ">
			<a th:href="@{/editgroup/{id}(id=${group.id})}"><button class="btn btn-outline-success " type="button">Back</button></a>
		</div>
	</nav>

	<div class="container  mt-5">
		<div th:switch="${ansr}">
			<div class="row">
				<div class="col">
					<div th:case="fail">
						<div class="col">
							<div class="alert alert-danger alert-dismissible fade show" role="alert">
								<span th:utext="'<Strong>ERROR:&nbsp</strong>'+ ${mess}"></span>
								<button type="button" class="btn-close" data-bs-dismiss="alert"
									aria-label="Close"></button>
							</div>
						</div>
					</div>
					<div th:case="pass">
						<div class="col">
							<div class="alert alert-success alert-dismissible fade show" role="alert">
								<span th:utext="'<Strong>SUCCESS:&nbsp</strong>'+ ${mess}"></span>
								<button type="button" class="btn-close" data-bs-dismiss="alert"
									aria-label="Close"></button>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>


		<div class="row">
			<div class="col">
				<nav class="navbar navbar-light bg-light">
					<!--					<h4 th:text="'Manage: '+${group.groupName} + ' (' + ${group.year} + ')'"><b></b></h4> -->
				</nav>
				<form th:object="${group}" method="post">

					<label for="groupName">Group Name:</label>
					<input type="text" th:field="*{groupName}" id="groupName" placeholder="Group Name">
					<span th:if="${#fields.hasErrors('groupName')}" th:errors="*{groupName}"></span>

					<label for="number">Number:</label>
					<input type="text" th:field="*{number}" id="number" placeholder="Group Number">
					<span th:if="${#fields.hasErrors('number')}" th:errors="*{number}"></span>

					<label for="year">Year:</label>
					<input type="text" th:field="*{year}" id="year" placeholder="Group Year">
					<span th:if="${#fields.hasErrors('year')}" th:errors="*{year}"></span>

					<input type="submit" class="btn btn-outline-success" value="Update group">
				</form>
			</div>
		</div>
		<hr>
	</div>

	<div class="container  mt-5">
		<div style="overflow-x: auto;">
			<div style="display:flex;">
				<div style="flex: 50%;">
					<h4><b>Edit Group Employee</b></h4>

					<div id="left-body" class="left" style="background-color: red;">
						<div class="row">
							<div class="col">
								<div class="accordion" id="accordionExample">
									<div class="accordion-item">
										<form action="#"
											th:action="@{/group/userUpdate/{id}/{gid} (id=${user.id}, gid=${group.id})}"
											th:object="${user}" method="post">
											<div class="container">
												<div class="row align-items-start">
													<div class="col" align="center">
														<div>
															<label for="firstName">First Name</label> <input type="text"
																th:field="*{firstName}" id="firstName"
																placeholder="First Name" fdprocessedid="7vrca">
															<span th:if="${#fields.hasErrors('firstName')}"
																th:errors="*{firstName}"></span>
														</div>
														<div>
															<label for="lastName">Last Name</label> <input type="text"
																th:field="*{lastName}" id="lastName"
																placeholder="Last Name" fdprocessedid="q4x8n5">
															<span th:if="${#fields.hasErrors('lastName')}"
																th:errors="*{lastName}"></span>
														</div>
														<div>
															<label for="email">Email </label> <input type="text"
																th:field="*{email}" id="email" placeholder="Email "
																fdprocessedid="q4x8n5">
															<span th:if="${#fields.hasErrors('lastName')}"
																th:errors="*{email}"></span>
														</div>
														<div>
															<label for="jobTitle">Title </label> <input type="text"
																th:field="*{jobTitle}" id="jobTitle"
																placeholder="jobTitle " fdprocessedid="q4x8n5">
															<span th:if="${#fields.hasErrors('jobTitle')}"
																th:errors="*{jobTitle}"></span>
														</div>



													</div>

													<div id="updateBtn">
														<input type="submit" class="btn btn-outline-success"
															value="Update User" fdprocessedid="ucows">
														<a id="cancel" class="btn btn-outline-success"
															type="button">Cancel</a>
													</div>



												</div>
											</div>
										</form>
										<script>
											$("#cancel").on("click", function () {
												$(".left").remove();
											});
										</script>

									</div>

								</div>
							</div>
						</div>



					</div>
				</div>

				<div
					style="display: flex; flex-direction: column; padding-left:10px; white-space: nowrap; width: 100%; overflow:auto">
					<div class="scrollable" style="height: 500px; overflow: auto; width: 100%;">
						<h4><b>Group Employees</b></h4>
						<hr>
						<table class="table" align="center">
							<thead>
								<tr>
									<th>Name</th>
									<th>Group</th>
									<th>Department</th>
								</tr>
							</thead>
							<tbody>
								<tr th:each="rev : ${group.reviewees}" style="vertical-align: baseline">
									<td th:text="${rev.user.name}"></td>
									<td th:text="${group.groupName}"></td>
									<td th:text="${rev.user.departmentName}"></td>

									<td>
										<span style="padding-right:2px">
											<button class="btn btn-outline-success" type="button"
												th:onclick="|window.location.href='@{/edit/{id}/{userId} (id=${group.id} , userId=${rev.user.id})}'|">Edit</button>

										</span>
									</td>
									<td>
										<span style="padding-right:2px">
											<button class="btn btn-outline-primary" type="button"
												th:onclick="|window.location.href='@{/editgroupmoveuser/{id}/{uid}(id=${group.id}, uid=${rev.user.id})}'|">Move</button>
										</span>
									</td>
									<td>
										<span style="padding-right:2px">
											<button class="btn btn-outline-danger" type="button"
												th:onclick="|window.location.href='@{/group/deleteUser/{id}/{gid} (gid=${group.id} , id=${rev.user.id})}'|">Remove</button>
										</span>
									</td>
								</tr>
							</tbody>
						</table>
					</div>

					<div style=" flex: 1; padding-left:10px; white-space: nowrap; width: 100%">
						<h4><b>Group Evaluators</b></h4>
						<hr>
						<table class="table" align="center">
							<thead>
								<tr>
									<th>Name</th>
									<th>Level</th>
								</tr>
							</thead>
							<tbody>
								<tr th:each="eval : ${evalList}" style="vertical-align: baseline; height: 30px">
									<td th:text="${eval.user.name}"></td>
									<td th:text="${eval.level.name}"></td>

									<td>
										<span style="padding-right:2px">
											<button class="btn btn-outline-success" type="button"
												th:onclick="|window.location.href='@{/getchangeEvaluator/{id}/{eid} (id=${group.id} , eid=${eval.id})}'|">Edit</button>

										</span>
									</td>

								</tr>
							</tbody>
						</table>
					</div>
				</div>
			</div>
		</div>
	</div>




	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
		integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p"
		crossorigin="anonymous"></script>
</body>




</html>